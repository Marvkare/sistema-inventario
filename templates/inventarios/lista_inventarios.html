{% extends "base.html" %}

{% block title %}Gestión de Inventarios{% endblock %}

{% block content %}
<div class="page-wrapper">
    <div class="container-limit">
        
        <div class="header-card">
            <div class="header-text">
                <h1>Gestión de Inventarios</h1>
                <p>Vista general de todos los procesos de inventario.</p>
            </div>
            <div class="header-icon-box">
                <i class="fas fa-clipboard-list"></i>
            </div>
        </div>

        <div class="action-bar">
            <div class="title-group">
                <h2>Inventarios Activos</h2>
                <p>Seguimiento y gestión de procesos.</p>
            </div>
            <a href="{{ url_for('inventarios.crear_inventario') }}" class="btn btn-primary">
                <i class="fas fa-plus-circle"></i> Iniciar Nuevo Inventario
            </a>
        </div>

        <div class="card table-card">
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Tipo</th>
                            <th>Alcance</th>
                            <th>Estatus</th>
                            <th>Fecha Inicio</th>
                            <th class="text-center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for inventario in inventarios %}
                        <tr>
                            <td>
                                <div class="name-wrapper">
                                    <div class="icon-circle"><i class="fas fa-clipboard-check"></i></div>
                                    <span class="font-bold">{{ inventario.nombre }}</span>
                                </div>
                            </td>
                            
                            <td>
                                <span class="text-muted">{{ inventario.tipo }}</span>
                            </td>
                            
                            <td>
                                <div class="scope-info">
                                    <span class="scope-item">
                                        <i class="fas fa-building"></i> <strong>{{ inventario.num_areas }}</strong> Áreas
                                    </span>
                                    <span class="scope-item">
                                        <i class="fas fa-box"></i> <strong>{{ inventario.num_bienes }}</strong> Bienes
                                    </span>
                                </div>
                            </td>
                            
                            <td>
                                {% if inventario.estatus == 'Planificado' %}
                                    <span class="badge badge-gray"><i class="fas fa-clock"></i> Planificado</span>
                                {% elif inventario.estatus == 'En Progreso' %}
                                    <span class="badge badge-blue"><i class="fas fa-spinner fa-spin"></i> En Progreso</span>
                                {% elif inventario.estatus == 'En Conciliación' %}
                                    <span class="badge badge-yellow"><i class="fas fa-balance-scale"></i> En Conciliación</span>
                                {% elif inventario.estatus == 'Finalizado' %}
                                    <span class="badge badge-green"><i class="fas fa-check-circle"></i> Finalizado</span>
                                {% elif inventario.estatus == 'Cancelado' %}
                                    <span class="badge badge-red"><i class="fas fa-times-circle"></i> Cancelado</span>
                                {% endif %}
                            </td>
                            
                            <td>
                                <span class="text-date"><i class="fas fa-calendar-alt"></i> {{ inventario.fecha_inicio.strftime('%d/%m/%Y') }}</span>
                            </td>
                            
                            <td class="text-center">
                                <div class="actions-flex">
                                    <a href="{{ url_for('inventarios.gestionar_inventario', inventario_id=inventario.id) }}" 
                                       class="btn-link btn-link-primary">
                                        <i class="fas fa-cog"></i> Gestionar
                                    </a>
                                    <span class="divider">|</span>
                                    <a href="{{ url_for('inventarios.generar_reporte', inventario_id=inventario.id) }}" 
                                       class="btn-link btn-link-secondary">
                                        <i class="fas fa-chart-bar"></i> Reporte
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="6" class="empty-state">
                                <div class="empty-content">
                                    <i class="fas fa-inbox"></i>
                                    <p>No hay inventarios registrados</p>
                                    <small>Comience creando un nuevo inventario</small>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block styles %}
<style>
    /* VARIABLES */
    :root {
        --col-burgundy: #6A2E4D;
        --col-burgundy-dark: #551E3A;
        --col-beige: #BC9B6A;
        --col-beige-light: #fdfbf7;
        --col-bg: #f9fafb;
        --col-white: #ffffff;
        
        --radius: 12px;
        --shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        
        /* Colores Estatus */
        --bg-blue: #eff6ff; --text-blue: #1e40af; --border-blue: #dbeafe;
        --bg-yellow: #fefce8; --text-yellow: #854d0e; --border-yellow: #fef9c3;
        --bg-green: #f0fdf4; --text-green: #166534; --border-green: #dcfce7;
        --bg-red: #fef2f2; --text-red: #991b1b; --border-red: #fee2e2;
        --bg-gray: #f3f4f6; --text-gray: #374151; --border-gray: #e5e7eb;
    }

    /* Layout */
    .page-wrapper { min-height: 100vh; background: var(--col-bg); padding: 2rem 1rem; }
    .container-limit { max-width: 1280px; margin: 0 auto; }

    /* Header */
    .header-card {
        background: linear-gradient(to right, var(--col-burgundy), var(--col-burgundy-dark));
        border-radius: var(--radius); padding: 1.5rem 2rem; color: white;
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 2rem; box-shadow: var(--shadow);
    }
    .header-text h1 { margin: 0; font-size: 1.5rem; }
    .header-text p { margin: 0.5rem 0 0; color: #e2e8f0; font-size: 0.9rem; }
    .header-icon-box {
        width: 48px; height: 48px; background: var(--col-beige); border-radius: 50%;
        display: flex; align-items: center; justify-content: center; color: var(--col-burgundy); font-size: 1.2rem;
    }

    /* Action Bar */
    .action-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
    .title-group h2 { margin: 0; font-size: 1.25rem; color: var(--col-burgundy); }
    .title-group p { margin: 0; color: #6b7280; font-size: 0.9rem; }

    /* Card & Table */
    .card { background: var(--col-white); border-radius: var(--radius); box-shadow: var(--shadow); border: 1px solid #e5e7eb; overflow: hidden; }
    .table-responsive { overflow-x: auto; }
    
    .data-table { width: 100%; border-collapse: collapse; min-width: 900px; }
    .data-table th { background: #f9fafb; padding: 1rem; text-align: left; font-size: 0.85rem; font-weight: 600; color: #4b5563; border-bottom: 2px solid #e5e7eb; text-transform: uppercase; }
    .data-table td { padding: 1rem; border-bottom: 1px solid #f3f4f6; color: #1f2937; vertical-align: middle; font-size: 0.95rem; }
    .data-table tr:hover { background: #fdfbf7; }
    .text-center { text-align: center; }

    /* Elementos de Celda */
    .name-wrapper { display: flex; align-items: center; gap: 0.8rem; }
    .icon-circle { width: 32px; height: 32px; background: rgba(106, 46, 77, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--col-burgundy); font-size: 0.9rem; }
    .font-bold { font-weight: 600; color: #1f2937; }
    .text-muted { color: #6b7280; }
    
    .scope-info { display: flex; flex-direction: column; gap: 0.2rem; font-size: 0.85rem; }
    .scope-item i { color: var(--col-burgundy); width: 16px; }
    .scope-item strong { color: var(--col-burgundy); }

    .text-date { font-size: 0.9rem; color: #4b5563; }
    .text-date i { color: var(--col-burgundy); margin-right: 0.3rem; }

    /* Badges */
    .badge { padding: 0.3rem 0.7rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; display: inline-flex; align-items: center; gap: 0.3rem; border: 1px solid transparent; }
    .badge-gray { background: var(--bg-gray); color: var(--text-gray); border-color: var(--border-gray); }
    .badge-blue { background: var(--bg-blue); color: var(--text-blue); border-color: var(--border-blue); }
    .badge-yellow { background: var(--bg-yellow); color: var(--text-yellow); border-color: var(--border-yellow); }
    .badge-green { background: var(--bg-green); color: var(--text-green); border-color: var(--border-green); }
    .badge-red { background: var(--bg-red); color: var(--text-red); border-color: var(--border-red); }

    /* Acciones */
    .actions-flex { display: flex; align-items: center; justify-content: center; gap: 0.8rem; }
    .btn-link { text-decoration: none; font-size: 0.9rem; font-weight: 500; display: inline-flex; align-items: center; gap: 0.3rem; transition: color 0.2s; }
    .btn-link-primary { color: var(--col-burgundy); }
    .btn-link-primary:hover { color: var(--col-burgundy-dark); }
    .btn-link-secondary { color: #6b7280; }
    .btn-link-secondary:hover { color: #374151; }
    .divider { color: #e5e7eb; }

    /* Botón Principal */
    .btn { padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; transition: all 0.2s; font-size: 0.95rem; }
    .btn-primary { background: linear-gradient(to right, var(--col-burgundy), var(--col-burgundy-dark)); color: white; border: none; cursor: pointer; }
    .btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }

    /* Empty State */
    .empty-state { text-align: center; padding: 3rem !important; color: #9ca3af; }
    .empty-content i { font-size: 2.5rem; margin-bottom: 0.5rem; opacity: 0.5; }
    .empty-content p { font-size: 1.1rem; margin: 0; }

    /* Móvil */
    @media (max-width: 768px) {
        .header-card { flex-direction: column; text-align: center; }
        .action-bar { flex-direction: column; align-items: flex-start; }
    }
</style>
{% endblock %}